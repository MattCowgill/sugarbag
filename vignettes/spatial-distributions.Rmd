---
title: "Vignette Title"
author: "Vignette Author"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


```{r}

library(sugaRbag)

library(tidyverse)
library(purrr)
library(sf)
library(viridis)
library(ggthemes)
#library(plotly)
library(geofacet)
```


```{r}
load(system.file("data","sa2_2011.Rda", package = "sugaRbag"))
load(system.file("data","capital_cities.Rda", package = "sugaRbag"))
load(system.file("data","fortified_qld_3.Rda", package = "sugaRbag"))
load(system.file("data","SIR_Downloadable_Data.Rda", package = "sugaRbag"))



qld_lung <- SIR_Downloadable_Data %>%
    #filter(Cancer_name=="Lung") %>%
    filter(Cancer_name=="Melanoma") %>%
    filter(Sex_name == "Persons") %>%
    filter(SA2_name %in% fortified_qld_3$SA2_NAME11)

fortified_SIR <- left_join(fortified_qld_3, qld_lung, by = c("SA2_NAME11"="SA2_name"))

```



```{r}
ggplot(data=fortified_SIR) +
    geom_hex(aes(x = hex_long, y = hex_lat, fill = p50), position = "identity", stat = "identity") +
    scale_fill_viridis() +
    guides(fill = FALSE) +
    theme(aspect.ratio = 1)
```

```{r}
ggplot(data=fortified_SIR) +
    scale_fill_viridis_c() +
    #guides(fill = FALSE) +
    theme(aspect.ratio = 1) +
    geom_polygon(aes(x=long,y=lat,group=group, fill = p50))
    
```


```{r}
qld_lung <- SIR_Downloadable_Data %>%
    filter(Cancer_name=="Lung") %>%
    filter(Sex_name == "Persons") %>%
    filter(SA2_name %in% fortified_qld_3$SA2_NAME11)

fortified_lung <- left_join(fortified_qld_3, qld_lung, by = c("SA2_NAME11"="SA2_name"))

```


```{r}
ggplot(data=fortified_lung) +
    geom_hex(aes(x = hex_long, y = hex_lat, fill = p50), position = "identity", stat = "identity") +
    scale_fill_viridis() +
    guides(fill = FALSE) +
    theme(aspect.ratio = 1)
```

```{r}
ggplot(data=fortified_lung) +
    scale_fill_viridis_c() +
    #guides(fill = FALSE) +
    theme(aspect.ratio = 1) +
    geom_polygon(aes(x=long,y=lat,group=group, fill = p50))
    
```

